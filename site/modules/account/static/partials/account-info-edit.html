<form name="accountForm" data-ng-class="{saving: 'loading-medium'}" class="pull-left">
    <fieldset>
        <legend data-translate data-ng-hide="currentStep">Edit profile</legend><div class="clearfix"></div><br />
        <div class="span5 clearfix container">
            <div class="control-group" data-ng-repeat="(field, properties) in fields.basic" data-ng-show="properties.shown">
                <label data-ng-show="properties.required"
                       class="control-label"
                       for="account_{{field}}">
                    * {{properties.title}}
                </label>
                <label data-ng-show="!properties.required"
                       class="control-label"
                       for="account_{{field}}">
                    {{properties.title}}
                </label>
                <div class="controls">
                    <input type="{{properties.type}}"
                           name="account_{{field}}"
                           id="account_{{field}}"
                           data-ng-validate="properties.validate"
                           data-ng-required="properties.required"
                           data-ng-pattern="{{properties.pattern}}"
                           data-ng-model="account[field]" class="span4" />
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="account_phone">
                    * Phone
                </label>
                <div class="controls">
                    <select class="span2" data-ng-model="selectedCountryCode" name="account_phonecountrycode" id="countrycode" required>
                        <option value="">Choose phone country code</option>
                        <option data-ng-repeat="(code, value) in countryCodes.codes" value="{{value}}">{{code}} (+{{value}})</option>
                    </select>
                    <input type="text" class="span2" id="account_phone" name="account_phone" data-ng-model="phone" required>
                </div>
            </div>
        </div>

        <div class="pull-right span4 container">
            <div class="control-group">
                <div class="control-group" data-ng-repeat="(field, properties) in fields.address" data-ng-show="properties.shown">
                    <label data-ng-show="properties.required"
                           class="control-label"
                           for="account_{{field}}">
                        * {{properties.title}}
                    </label>
                    <label data-ng-show="!properties.required"
                           class="control-label"
                           for="account_{{field}}">
                        {{properties.title}}
                    </label>
                    <div class="controls">
                        <input class="span4" type="{{properties.type}}"
                               name="account_{{field}}"
                               id="account_{{field}}"
                               data-ng-validate="properties.validate"
                               data-ng-required="properties.required"
                               data-ng-pattern="{{properties.pattern}}"
                               data-ng-model="account[field]" />
                    </div>
                </div>

                <label class="control-label"
                       for="account_country">
                    * Country
                </label>
                <select class="span4" data-ng-model="account['country']" name="account_country" id="account_country" required data-ng-options="country.iso3 as country.name for country in countries| orderBy: 'name'"></select>

                <div data-ng-show="!stateSel">
                    <label class="control-label" for="account_state">* State</label>
                    <input type="text" class="span4" id="account_state" name="account_state" data-ng-model="account['state']" required>
                </div>
                <div data-ng-show="stateSel" class="border">
                    <label class="control-label" for="account_state2">* State</label>
                    <select id="account_state2" name="account_state" data-ng-model="account['state']" required>
                        <option data-ng-repeat="(k, v) in stateSel" value="{{k}}">{{v}}</option>
                    </select>
                </div>
				
            </div>
        </div>
        <div class="clearfix"></div>
        <div class="span8" data-ng-show="error">{{error}}</div>

        <a data-ng-show="currentStep" data-ng-click="signOut()" class="btn pull-left" data-translate>Cancel</a>
        <a data-ng-hide="currentStep" data-ng-click="cancelChanges()" class="btn pull-left" data-translate>Cancel</a>

		<button class="btn btn-success pull-right" data-ng-click="updateAccount()" data-ng-disabled="saving || !accountForm.$valid" data-translate>Save changes</button>
        <div class="clearfix"></div>
    </fieldset>
	<div class="clearfix"></div>
</form>
