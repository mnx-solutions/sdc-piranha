<div class="{{currentStep && 'row-fluid' || 'container span9'}}">
    <form name="accountForm" class="row-fluid">
        <fieldset class="span6">
            <legend data-translate data-ng-hide="currentStep">Contact Info</legend>
            <div class="control-group">
                <label class="control-label" for="email" data-translate>
                    Email
                </label>
                <div class="controls">
                    <input type="email"
                           id="email"
                           name="email"
							class="span12"
                           data-ng-model="account.email"
                           data-ng-class="{error: isError('email')}"
                           required/>
                    <div class="error"
                         data-translate
                         data-ng-show="isError('email', 'required')">
                        Missing email address
                    </div>
                    <div class="error"
                         data-translate
                         data-ng-show="isError('email', 'email')">
                        Invalid email address
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="firstName" data-translate>
                    First name
                </label>
                <div class="controls">
                    <input type="text"
                           id="firstName"
						class="span12"
                           name="firstName"
                           data-ng-model="account.firstName"
                           data-ng-class="{error: isError('firstName')}"
                           required/>
                    <div class="error"
                         data-translate
                         data-ng-show="isError('firstName', 'required')">
                        Missing first name
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="lastName" data-translate>
                    Last name
                </label>
                <div class="controls">
                    <input type="text"
                           id="lastName"
							class="span12"
                           name="lastName"
                           data-ng-model="account.lastName"
                           data-ng-class="{error: isError('lastName')}"
                           required/>
                    <div class="error"
                         data-translate
                         data-ng-show="isError('lastName', 'required')">
                        Missing last name
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="companyName" data-translate>
                    Company name
                </label>
                <div class="controls">
                    <input type="text"
                           id="companyName"
							class="span12"
                           name="companyName"
                           data-ng-model="account.companyName"/>
                    <div class="error"
                         data-translate
                         data-ng-show="isError('companyName', 'required')">
                        Missing company name
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="phone" data-translate>
                    Phone
                </label>
                <div class="controls">
                    <select data-ng-style="countryStyle"
                            data-ng-model="account.country"
                            style="width:255px"
                            name="countryCode"
                            id="countryCode"
                            data-ng-options="country as (country.name + ' (+' + country.areaCode + ')') group by country.group for country in countryCodes | filter:filterUndefinedAreas | orderBy: ['-group','name']">
                    </select>
                    <div class="input-prepend">
                        <span class="add-on" style="width:50px;text-align:left">(+{{selectedCountryCode}})</span>
                        <input type="text"
                               id="phone"
                               name="phone"
								style="width:160px"
                               data-ng-model="account.phone"
                               data-ng-pattern="/^([\d#\*]+)$/"
                               data-ng-class="{error: isError('phone')}"
                               required/>
                    </div> <span data-ng-show="currentStep" data-html="true" data-translate-attributes="data-original-title" data-toggle="tooltip" data-trigger="hover" data-placement="right" class="tooltip-hover icon-info-sign" data-original-title="Enter your full phone number with country code and area code. We use this number to verify your account."></span>
                    <div class="error"
                         data-translate
                         data-ng-show="isError('phone', 'required')">
                        Missing phone number
                    </div>
                    <div class="error"
                         data-translate
                         data-ng-show="isError('phone', 'pattern')">
                        Invalid phone number
                    </div>
                </div>
            </div>
			<button class="btn btn-joyent-blue pull-right" data-ng-show="!currentStep" data-ng-click="submitForm()" data-ng-disabled="loading || accountForm.$invalid" data-translate>Save changes</button>
        </fieldset>

		<fieldset class="span6 pull-right" data-ng-hide="currentStep">
            <legend data-translate>Change password</legend>
			<div class="clearfix"></div><br />
			<p>Popup window will direct you to SSO pages. No sensitive data is exchanged between two sites.</p>
			<p>Change password will open a popup window. Please ensure you dont have popup blokers active.</p>
			
			<a data-ng-click="changePassword()" class="btn pull-right" data-translate>Change password</a>

            <legend data-translate>Two factor authentication</legend>
            <div class="clearfix"></div><br />

            <div data-ng-show="qrImage">
                <p>You have enabled two-factor authentication. You will be asked to provide an extra verification code the next time that you login.</p>
                <ol>
                    <li>Please download 'Google Authenticator' from your phone's App Store.</li>
                    <li>
                        Scan the QR code below using the application
                        <div style="margin: 15px; padding-left: 20px" data-ng-bind-html-unsafe="qrImage">
                        </div>
                    </li>

                    <li>
                        Type the code from your new application below to verify your configuration.
                        <div class="control-group">
                            <label class="control-label" for="otpass">Your code</label>
                            <div class="controls">
                                <input id="otpass" type="text" class="span2" value="" data-ng-model="otpass" />
                            </div>
                        </div>
                    </li>
                </ol>
                <button class="btn btn-primary pull-right" data-ng-click="testTwoFactorAuth()" data-translate>Verify</button>
                <div class="pull-right loading-medium" style="width:30px; height:30px;min-width:30px;min-height:30px;" data-ng-show="tfaTestLoading"></div>
            </div>

            <button data-ng-show="!account.tfaEnabled && !qrImage" data-ng-click="enableTwoFactorAuth()" class="btn btn-success pull-right" data-translate>Enable</button>
            <button data-ng-show="account.tfaEnabled" data-ng-click="disableTwoFactorAuth()" class="btn btn-danger pull-right" data-translate>Disable</button>

            <div class="pull-right loading-medium" style="width:30px; height:30px;min-width:30px;min-height:30px;" data-ng-show="tfaLoading"></div>

		</fieldset>


		<div class="clearfix"></div>
        
        <div class="clearfix" data-ng-show="currentStep"></div>
        <hr data-ng-show="currentStep" />
        <a data-ng-show="currentStep" data-ng-click="signOut()" class="pull-left note text-small" data-translate>Click here to return to homepage</a>
		<button class="btn btn-joyent-blue pull-right"  data-ng-show="currentStep" data-ng-click="submitForm()" data-ng-disabled="loading || accountForm.$invalid" data-translate>Save changes</button>
		

        <div class="pull-right loading-medium" style="width:30px; height:30px;min-width:30px;min-height:30px;" data-ng-show="loading"></div>

        <div class="clearfix"></div>
    </form>
</div>
