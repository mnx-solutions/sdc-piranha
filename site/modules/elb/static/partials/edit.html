<div class="container container-elb" data-ng-controller="elb.EditController">
    <!--<div data-notification></div>-->
    <div data-ng-form name="editForm">
        <ul class="breadcrumb">
            <li class="ng-scope">
                <a href="#!/elb" class="ng-binding">
                    <span class="ng-scope ng-binding" data-translate>Load Balancers</span>
                </a>
                <span class="divider">/</span>
            </li>
            <li class="ng-scope active">
                <span class="ng-binding" data-ng-show="balancerId" data-translate>Edit Load Balancer</span>
                <span class="ng-binding" data-ng-show="!balancerId" data-translate>Create Load Balancer</span>
            </li>
        </ul>
        <!--<div class="page-title">-->
            <h3 data-ng-show="balancerId" class="page-title" data-translate>Edit Load Balancer</h3>
            <h3 data-ng-hide="balancerId" class="page-title" data-translate>Create Load Balancer</h3>
            <!--<div class="clearfix"></div>-->
        <!--</div>-->
        <div class="loading-large" data-ng-hide="allLoading"></div>
        <div class="row-fluid lb-edit" data-ng-show="allLoading">
            <div class="pull-left bg-edit-create">
            <legend>Machine configuration</legend>
                <div class="control-group">
                    <span class="edit-name">Name</span>
                    <span class="edit-value"><input type="text" required data-ng-model="server.name"/></span>
                </div>

                <div class="control-group" data-ng-show="balancerId">
                    <span class="edit-name">IP</span>
                    <span class="edit-value">{{server.host}}</span>
                </div>

                <div class="control-group">
                    <span class="edit-name">Datacenter</span>
                    <span class="edit-value">
                        <div class="btn-group tooltip-hover span3 dd-margin protocol-pos"
                             data-toggle="tooltip"
                             data-placement="bottom">
                            <label class="btn dd-btn-long">{{datacenterSelected.name}}</label>
                            <button class="btn dropdown-toggle" data-toggle="dropdown">
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li data-ng-repeat="datacenter in datacenters">
                                    <a data-ng-click="datacenterSelect(datacenter.name)">{{datacenter.name}}</a>
                                </li>
                            </ul>
                        </div>
                    </span>
                </div>

                <div class="control-group">
                    <span class="edit-name">Protocol</span>
                    <span class="edit-value">
                        <div class="btn-group tooltip-hover span3 dd-margin protocol-pos"
                             data-toggle="tooltip"
                             data-placement="bottom">
                            <label class="btn dd-btn">{{protocolSelected.name}}</label>
                            <button class="btn dropdown-toggle" data-toggle="dropdown">
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li data-ng-repeat="protocol in protocols">
                                    <a data-ng-click="protocolSelect(protocol.value)">{{protocol.name}}</a>
                                </li>
                            </ul>
                        <span class="upload-btn" data-ng-show="protocolSelected.name == 'HTTPS'">
                            <span data-cert-upload model="server.certificate"></span>
                        </span>
                        </div>
                    </span>
                </div>

                <div class="control-group">
                    <span class="edit-name">External port</span>
                    <span class="edit-value">
                        <input name="fromPort" type="text" required data-ng-model="server.fromPort"
                               data-ng-change="validatePort('fromPort', 1, 65535)"/>
                    </span>
                </div>

                <div class="control-group">
                    <span class="edit-name ">Internal port</span>
                    <span class="edit-value">
                        <input name="toPort" type="text" required data-ng-model="server.toPort"
                               data-ng-change="validatePort('toPort', 1, 65535)"/>
                    </span>
                </div>
                <div class="lb-line"></div>
                <legend>Health Check configuration</legend>

                <div class="control-group">
                    <span class="edit-name">URL</span>
                    <span class="edit-value"><input type="text" data-ng-model="server.health.url"/></span>
                </div>
                <div class="control-group">
                    <span class="edit-name">Timeout</span>
                    <span class="edit-value">
                        <div class="btn-group tooltip-hover span3 dd-margin ht-btn-pos"
                             data-toggle="tooltip"
                             data-placement="bottom">
                            <label class="btn dd-btn-long">{{server.health.timeout}} sec</label>
                            <button class="btn dropdown-toggle" data-toggle="dropdown">
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li data-ng-repeat="timeout in timeouts">
                                    <a data-ng-click="timeoutSelect(timeout)">{{timeout}} sec</a>
                                </li>
                            </ul>
                        </div>
                    </span>
                </div>
                <div class="control-group">
                    <span class="edit-name">HC interval</span>
                    <span class="edit-value">
                        <div class="btn-group tooltip-hover span3 dd-margin"
                             data-toggle="tooltip"
                             data-placement="bottom">
                            <label class="btn dd-btn-long">{{server.health.delay}} mins</label>
                            <button class="btn dropdown-toggle" data-toggle="dropdown">
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li data-ng-repeat="hcDelay in hcDelays">
                                    <a data-ng-click="hcDelaySelect(hcDelay)">{{hcDelay}} mins</a>
                                </li>
                            </ul>
                        </div>
                    </span>
                </div>
                <div class="control-group">
                    <span class="edit-name">Failure Threshold</span>
                    <span class="edit-value">
                        <input name="failThreshold" type="text" class="clb-input"
                                                    data-ng-model="server.health.failThreshold"
                                                    data-ng-change="validatePort('failThreshold', 1)"/>
                    </span>
                </div>
            <div class="lb-line"></div>
                <!--<div class="control-group">-->
                    <!--<span class="edit-name"></span>-->
                    <!--<span class="edit-value"></span>-->
                <!--</div>-->






                <!--<div class="">-->
                    <!--<span class="span2 lb-label" data-translate>Name</span>-->
                    <!--<span class="span9 name-input">-->
                        <!--<input type="text" required data-ng-model="server.name"/>-->
                    <!--</span>-->
                <!--</div>-->
                <!--<div data-ng-show="balancerId">-->
                    <!--<span class="span2" data-translate>IP</span>-->
                    <!--<span class="span9 balancer-id">-->
                        <!--{{server.host}}-->
                    <!--</span>-->
                <!--</div>-->
                <!--<div>-->
                    <!--<span class="span3 lb-label" data-translate>Protocol</span>-->
                    <!--<div class="btn-group tooltip-hover span3 dd-margin protocol-pos"-->
                         <!--data-toggle="tooltip"-->
                         <!--data-placement="bottom">-->
                        <!--<label class="btn dd-btn">{{protocolSelected.name}}</label>-->
                        <!--<button class="btn dropdown-toggle" data-toggle="dropdown">-->
                            <!--<span class="caret"></span>-->
                        <!--</button>-->
                        <!--<ul class="dropdown-menu">-->
                            <!--<li data-ng-repeat="protocol in protocols">-->
                                <!--<a data-ng-click="protocolSelect(protocol.value)">{{protocol.name}}</a>-->
                            <!--</li>-->
                        <!--</ul>-->
                        <!--<span class="upload-btn" data-ng-show="protocolSelected.name == 'HTTPS'">-->
                            <!--<span data-cert-upload model="server.certificate"></span>-->
                        <!--</span>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="clearfix"></div>-->
                <!--<div>-->
                    <!--<span class="span3 lb-label e-port" data-translate>External port</span>-->
                    <!--<span class="port-input port-m">-->
                        <!--<input name="fromPort" type="text" required data-ng-model="server.fromPort"-->
                               <!--data-ng-change="validatePort('fromPort', 1, 65535)"/>-->
                    <!--</span>-->
                <!--</div>-->
                <!--<div class="clearfix"></div>-->
                <!--<div class="int-port">-->
                    <!--<span class="span3 lb-label e-port" data-translate>Internal port</span>-->
                    <!--<span class="port-input port-m">-->
                        <!--<input name="toPort" type="text" required data-ng-model="server.toPort"-->
                               <!--data-ng-change="validatePort('toPort', 1, 65535)"/>-->
                    <!--</span>-->
                <!--</div>-->
                <!--<div class="clearfix"></div>-->
                <!--<div class="lb-line"></div>-->
                <!--<p class="span12 pull-left hc-conf" data-translate>Health Check configuration</p>-->

                <!--<div class="clearfix"></div>-->
                <!--<div style="margin-top: 10px;">-->
                    <!--<span class="span3 lb-label" data-translate>URL</span>-->
                <!--<span class="span3">-->
                    <!--<input type="text" data-ng-model="server.health.url" class="url-input"/>-->
                <!--</span>-->
                    <!--<span class="span3 lb-label timeout" data-translate>Timeout</span>-->

                    <!--<div class="btn-group tooltip-hover span3 dd-margin ht-btn-pos"-->
                         <!--data-toggle="tooltip"-->
                         <!--data-placement="bottom">-->
                        <!--<label class="btn dd-btn">{{server.health.timeout}} sec</label>-->
                        <!--<button class="btn dropdown-toggle" data-toggle="dropdown">-->
                            <!--<span class="caret"></span>-->
                        <!--</button>-->
                        <!--<ul class="dropdown-menu">-->
                            <!--<li data-ng-repeat="timeout in timeouts">-->
                                <!--<a data-ng-click="timeoutSelect(timeout)">{{timeout}} sec</a>-->
                            <!--</li>-->
                        <!--</ul>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="clearfix"></div>-->
                <!--<div>-->
                    <!--<span class="span3 hc-interval" data-translate>HC interval</span>-->
                    <!--<div class="btn-group tooltip-hover span3 dd-margin"-->
                         <!--data-toggle="tooltip"-->
                         <!--data-placement="bottom">-->
                        <!--<label class="btn dd-btn">{{server.health.delay}} mins</label>-->
                        <!--<button class="btn dropdown-toggle" data-toggle="dropdown">-->
                            <!--<span class="caret"></span>-->
                        <!--</button>-->
                        <!--<ul class="dropdown-menu">-->
                            <!--<li data-ng-repeat="hcDelay in hcDelays">-->
                                <!--<a data-ng-click="hcDelaySelect(hcDelay)">{{hcDelay}} mins</a>-->
                            <!--</li>-->
                        <!--</ul>-->
                    <!--</div>-->
                    <!--<span class="span3 failure-threshold" data-translate>Failure Threshold</span>-->
                <!--<span class="span2 port-input">-->
                    <!--<input name="failThreshold" type="text" class="clb-input"-->
                           <!--data-ng-model="server.health.failThreshold"-->
                           <!--data-ng-change="validatePort('failThreshold', 1)"/>-->
                <!--</span>-->
                <!--</div>-->
            </div>

            <div class="pull-right table-overflow table-left-border">
                <table class="table table-striped table-bordered table-hover table-full-width">
                    <thead>
                    <tr>
                        <th class="hidden-480"></th>
                        <th class="table-title sortable">
                            <div class="block" data-translate>Machine name</div>
                        </th>
                        <th class="table-title sortable">
                            <div class="block" data-translate>Data Center</div>
                        </th>
                        <!--th class="table-title sortable">
                            <div class="block" data-translate>Creation Date</div>
                        </th-->
                        <th class="table-title sortable">
                            <div class="block" data-translate>Load Balancer</div>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr data-ng-repeat="machine in machines">
                        <td width="10">
                            <label class="checkbox">
                                <div class="checker" data-ng-class="{hover:show}" data-ng-mouseenter="show = true" data-ng-mouseleave="show = false">
                            <span data-ng-click="selectCheckboxElb(machine.id)" data-ng-class="{checked: machine.checked}">
                                <input type="checkbox" class="group-checkable" data-set=".checkboxes" data-ng-model="machine.selected" value="">
                            </span>
                                </div>
                            </label>
                        </td>
                        <!--<td width="10"><input type="checkbox" class="group-checkable" data-ng-model="machine.selected">-->
                        </td>
                        <td title="{{machine.name}}"><a href="#!/compute/instance/{{machine.id}}">{{machine.name}}</a>
                        </td>
                        <td title="{{machine.datacenter}}">{{machine.datacenter}}</td>
                        <!-- <td title="{{machine.created | date:'yyyy-MM-dd'}}">{{machine.created | date:'yyyy-MM-dd'}}</td> -->
                        <td>
                            <span title="{{balancer.name}}" data-ng-repeat="balancer in machine.balancers">{{balancer.name}}{{{true: '', false: ', '}[$last]}}</span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

    <span data-ng-show="allLoading">
        <p class="logo-riverbed pull-left" data-translate>Powered by</p>
        <button data-ng-disabled="!editForm.$valid || saving" data-ng-click="save()"
                class="btn light pull-right edit-btn-pos" data-translate="">
            <span class="ng-scope" data-translate>Save</span>
        </button>
        <button data-ng-show="balancerId" data-ng-disabled="!editForm.$valid" data-ng-click="delete()"
                class="btn light pull-right delete-btn-pos" data-translate="">
            <span class="ng-scope" data-translate>Delete</span>
        </button>
        <div class="pull-right loading-medium load-pos" data-ng-show="saving"></div>
    </span>
    </div>
</div>