<div class="container-fluid content-container" data-ng-controller="Machine.IndexController">
    <div class="loading-large" data-ng-show="loading"></div>
    <div class="container content-container-inner">
        <div class="machines container" data-ng-show="pagedMachines.length || query">
            <data-breadcrumb></data-breadcrumb>
            <data-notification></data-notification>

            <div class="page-header">
                <h1 class="pull-left" data-translate>Instances</h1>
                <div ng-show="!machines.final && !packages.final" class="loading-medium-after-h1"></div>

                <form class="form-search pull-right">
                    <input type="search"
                           class="span3"
                           name="search"
                           id="search"
                           placeholder="Search instances"
                           data-ng-model="query"
                           data-ng-change="search()"
                           data-translate="placeholder" />
                </form>

                <div class="clearfix"></div>
            </div>

            <div class="list-controls container span5 pull-right">
                <div class="sort-control-container btn-group">
                    <button class="sort-control btn btn-mini" data-ng-show="sortField">
                        <span data-translate="value">
                            {{sortField.title}}
                        </span>
                        <span class="pull-right">
                            <i class="icon-arrow-up" data-ng-show="reverse"></i>
                            <i class="icon-arrow-down" data-ng-show="!reverse"></i>
                        </span>
                    </button>
                    <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown">
                        <span class="caret"></span>
                    </button>

                    <ul class="sort dropdown-menu">
                        <li class="item" data-ng-repeat="field in sortable">
                            <a data-ng-click="sortBy(field.value)">
                                <span data-translate="value">
                                    {{field.title}}
                                </span>
                                <span class="pull-right" data-ng-show="sortField.value == field.value">
                                    <i class="icon-arrow-up" data-ng-show="reverse"></i>
                                    <i class="icon-arrow-down" data-ng-show="!reverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>

                <button type="submit"
                        class="btn btn-mini"
                        data-ng-click="changeListType('normal')"
                        data-ng-class="{'active': listType == 'normal'}">
                    <i class="icon-align-justify"></i>
                </button>

                <button type="submit"
                        class="btn btn-mini"
                        data-ng-click="changeListType('alternate')"
                        data-ng-class="{'active': listType == 'alternate'}">
                    <i class="icon-th-large"></i>
                </button>
                <div class="clearfix"></div>
            </div>

            <div class="container span9 text-medium">
                <div data-ng-switch="listType">
                    <div data-ng-switch-when="normal" data-ng-include="'machine/static/partials/list-normal.html'"></div>
                    <div data-ng-switch-when="alternate" data-ng-include="'machine/static/partials/list-alternate.html'"></div>
                </div>

                <div class="pagination pagination-small pagination-centered span8">
                    <ul>
                        <li data-ng-class="{disabled: currentPage == 0}">
                            <a href ng-click="prevPage()" data-translate>« Prev</a>
                        </li>
                        <li data-ng-repeat="n in range()"
                            data-ng-class="{active: n == currentPage}"
                            data-ng-click="setPage()">
                            <a href ng-bind="n + 1">1</a>
                            <span data-ng-click="$event.stopPropagation()" class="" data-ng-show="(range()[$index] < range()[$index+1]-1)">...</span>
                        </li>
                        <li data-ng-class="{disabled: currentPage == pagedMachines.length - 1}">
                            <a href ng-click="nextPage()" data-translate>Next »</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="pull-right span3 container">
                <button data-ng-click="changeLocation('/instance/create/')"
                        class="create-instance btn btn-joyent-blue btn-large"
                        data-translate>Create Instance</button>
                <div class="clearfix"></div>

                <div class="alert alert-joyent-blue">
                    <h4 data-translate>Need help?</h4>
                    <p class="text-medium" data-translate>Help will open in new window</p>
                    <form class="form-search" method="GET" action="http://joyent.com/developers/search" target="_blank">
                        <div class="input-append">
                            <input type="text" name="q" class="input-small search-query" placeholder="Search help" data-translate="placeholder">
                            <button type="submit" class="btn" data-translate>Search</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="machines container" data-ng-hide="(pagedMachines.length || loading || query)">
            <data-notification></data-notification>

            <div class="alert alert-joyent-blue alert-global">
                <div class="pull-left">
                    <h4>Hello there!</h4>
                    <div data-translate>I see you have no instances configured.</div>
                </div>
                <a class="btn btn-joyent-blue pull-right alert-global" href="#!/instance/create" data-translate>Create an instance</a>
                <div class="clearfix"></div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
</div>

