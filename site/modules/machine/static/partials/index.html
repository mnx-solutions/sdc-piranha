<div class="container-fluid content-container" data-ng-controller="Machine.IndexController">
    <div class="container content-container-inner">
        <div class="machines container">
            <data-breadcrumb></data-breadcrumb>
			<div class="alert alert-error alert-global">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				<h4>Found some errors!</h4>
				<div>Error #1</div>
				<div>Error #2</div>
				<div>Error #3 (errors will be pushed into this.parent [only 1 (one) container ] not N times containers)</div>
			</div>
			
            <div class="page-header">
                <h1 class="pull-left" data-translate>Machines</h1><div ng-show="!machines.final && !packages.final" class="loading-medium-after-h1"></div>
                <form class="form-search pull-right">
                    <input type="search" class="input-large"
                           data-ng-model="query" data-ng-change="search()"
                           placeholder="Search machines" name="search" id="search" data-translate="placeholder" />
                </form>

                <div class="clearfix"></div>
            </div>

            <div class="pull-left" data-ng-show="pagedMachines.length" >
                <div class="btn-group pull-right"></div>
                <div class="clearfix"></div>

                <div class="item header sortable" style="margin-bottom: -1px">
                    <span class="summary pull-left">&nbsp;</span>
                        <span class="span2 text-medium sortable"
                              data-ng-click="sortBy('id')"
                              data-ng-switch on="sortIcon.id" data-translate>
							Name
                            <i class="icon-arrow-up" data-ng-switch-when="up"></i>
                            <i class="icon-arrow-down" data-ng-switch-when="down"></i>
                        </span>
                        
                        <span class="span1 text-medium sortable"
                              data-ng-click="sortBy('datacenter')"
                              data-ng-switch on="sortIcon.datacenter" data-translate>
							Datacenter
                            <i class="icon-arrow-up" data-ng-switch-when="up"></i>
                            <i class="icon-arrow-down" data-ng-switch-when="down"></i>
                        </span>
						
                        <span class="span1 text-medium sortable"
                              data-ng-click="sortBy('created')"
                              data-ng-switch on="sortIcon.created" data-translate>
							Created
                            <i class="icon-arrow-up" data-ng-switch-when="up"></i>
                            <i class="icon-arrow-down" data-ng-switch-when="down"></i>
                        </span>

                    <span class="span2 text-medium" data-translate>IP</span>

                        <span class="span1 text-medium pull-right sortable"
                              data-ng-click="sortBy('state')"
                              data-ng-switch on="sortIcon.state" data-translate>
							State
                            <i class="icon-arrow-up" data-ng-switch-when="up"></i>
                            <i class="icon-arrow-down" data-ng-switch-when="down"></i>
                        </span>
                </div>

                <div>
                    <div data-ng-repeat="machine in pagedMachines[currentPage] | orderBy:sortingOrder:reverse"
                         class="item">

	                        <span data-ng-click="toggleMachine(machine.id)">
	                            <span data-ng-class="{'icon-chevron-down': isCollapsed(machine.id), 'icon-chevron-up': !isCollapsed(machine.id)}"
                                      class="summary  pull-left">&nbsp;</span>

	                            <span class="span2 text-medium crop">
	                                <a href="#!/machine/details/{{machine.id}}">{{machine.label}}</a>
	                            </span>

	                            <span class="span1 text-medium">{{machine.datacenter}}</span>
	                            <span class="span1 text-medium crop" alt="{{machine.created | fromNow}}" title="{{machine.created | fromNow}}">{{machine.created | fromNow}}</span>
								
								<span class="span2 text-medium crop">
	                                <span data-ng-repeat="ip in machine.ips">{{ip}}</span>
	                            </span>
	                            
								
	                            <span class="span1 pull-right state">
                                    <machine-status machine="machine"></machine-status>
	                            </span>
	                        </span>

                        <div class="toolbox-help"
                             data-ng-hide="machine.state != 'stopped'">
                            <span class="text-error" data-translate>Machine is stopped, but billing will continue. You have to delete machine to cancel billing</span>
                        </div>

                        <div data-ng-hide="isCollapsed(machine.id)" class="toolbox">
                            <div class="pull-left toolbox-list" style="padding-left:38px">
                                <span class="key span2 data-translate">Memory</span>
                                <span class="value span4">{{machine.memory | sizeFormat}}&nbsp;</span>
                                <div class="clearfix"></div>

                                <span class="key span2 data-translate">Disk</span>
                                <span class="value span4">{{machine.disk | sizeFormat}}&nbsp;</span>
                                <div class="clearfix"></div>

                                <span class="key span2 data-translate">Image</span>
                                <span class="value span4">{{machine.dataset.name}}</span>
                                <div class="clearfix"></div>

                                <span class="key span2" data-translate>IP(s)</span>
                                <span class="value span4">
                                    <span data-ng-repeat="ip in machine.ips">
                                        <!-- TODO: !isPrivateIP -->
                                        <span data-ng-show="isPrivateIP(ip)">{{ip}}</span>
                                    </span>
                                </span>
                                <div class="clearfix"></div>
                            </div>
                            <div class="pull-right action-container">
                                <button role="button"
                                        class="btn btn-mini"
                                        data-ng-disabled="machine.state == 'running' || (machine.job && !machine.job.finished)"
                                        data-ng-click="startMachine(machine.id)"
                                        data-toggle="modal"
                                        data-translate>Start</button>
                                <button role="button"
                                        class="btn btn-mini"
                                        data-ng-disabled="machine.state == 'stopped' || (machine.job && !machine.job.finished)"
                                        data-ng-click="stopMachine(machine.id)"
                                        data-translate>Stop</button>
                                <button role="button"
                                        class="btn btn-mini"
                                        data-ng-disabled="machine.state != 'stopped' || (machine.job && !machine.job.finished)"
                                        data-ng-click="deleteMachine(machine.id)"
                                        data-toggle="modal"
                                        data-translate>Delete</button>
                                <button role="button"
                                        class="btn btn-mini"
                                        data-ng-disabled="machine.state != 'running' || (machine.job && !machine.job.finished)"
                                        data-ng-click="rebootMachine(machine.id)"
                                        data-toggle="modal"
                                        data-translate>Reboot</button>
                                <!-- <a href="#!/machine/details/{{machine.id}}"><button
                                   class="btn btn-mini btn-primary"
                                   data-translate>Edit</button>
                                </a> -->
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>

                </div>

                <div class="pagination pagination-small pagination-centered span8">
                    <ul>
                        <li data-ng-class="{disabled: currentPage == 0}">
                            <a href ng-click="prevPage()" data-translate>« Prev</a>
                        </li>
                        <li data-ng-repeat="n in range()"
                            data-ng-class="{active: n == currentPage}"
                            data-ng-click="setPage()">
                            <a href ng-bind="n + 1">1</a>
                        </li>
                        <li data-ng-class="{disabled: currentPage == pagedMachines.length - 1}">
                            <a href ng-click="nextPage()" data-translate>Next »</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="pull-left" data-ng-hide="(pagedMachines.length || initializing)">
                NO MACHINES VIEW
            </div>
            <div class="pull-right span4">
                <button data-ng-click="changeLocation('/machine/add/')"
                        class="btn btn-success btn-large"

                        data-translate>Add new Machine</button>
                <div class="clearfix"></div>
                <br />
                <div class="alert alert-success shadow">
                    <h4 data-translate>Need help?</h4>
                    <p class="text-medium" data-translate>Help will open in new window</p>
                    <form class="form-search" method="GET" action="http://joyent.com/developers/search" target="_blank">
                        <div class="input-append">
                            <input type="text" name="q" class="input-medium search-query" placeholder="Search help" data-translate="placeholder">
                            <button type="submit" class="btn" data-translate>Search</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
</div>



<div class="container-fluid content-container" data-ng-controller="Machine.IndexController">
    <div class="container content-container-inner">
        <div class="machines container" data-ng-show="pagedMachines.length">
            <data-breadcrumb></data-breadcrumb>
			<div class="alert alert-error alert-global">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				<h4>Found some errors!</h4>
				<div>Error #1</div>
				<div>Error #2</div>
				<div>Error #3 (errors will be pushed into this.parent [only 1 (one) container ] not N times containers)</div>
			</div>
			
            <div class="page-header">
                <h1 class="pull-left" data-translate>Machines</h1><div ng-show="!machines.final && !packages.final" class="loading-medium-after-h1"></div>
                <form class="form-search pull-right">
                    <input type="search" class="input-large"
                           data-ng-model="query" data-ng-change="search()"
                           placeholder="Search machines" name="search" id="search" data-translate="placeholder" />
                </form>

                <div class="clearfix"></div>
            </div>

            <div class="pull-left" >
                <div class="btn-group pull-right"></div>
                <div class="clearfix"></div>

                <div class="item header sortable" style="margin-bottom: -1px">
                    <span class="summary pull-left">&nbsp;</span>
                        <span class="span2 text-medium sortable"
                              data-ng-click="sortBy('id')"
                              data-ng-switch on="sortIcon.id" data-translate>
							Name
                            <i class="icon-arrow-up" data-ng-switch-when="up"></i>
                            <i class="icon-arrow-down" data-ng-switch-when="down"></i>
                        </span>
                        
                        <span class="span1 text-medium sortable"
                              data-ng-click="sortBy('datacenter')"
                              data-ng-switch on="sortIcon.datacenter" data-translate>
							Datacenter
                            <i class="icon-arrow-up" data-ng-switch-when="up"></i>
                            <i class="icon-arrow-down" data-ng-switch-when="down"></i>
                        </span>
						
                        <span class="span1 text-medium sortable"
                              data-ng-click="sortBy('created')"
                              data-ng-switch on="sortIcon.created" data-translate>
							Created
                            <i class="icon-arrow-up" data-ng-switch-when="up"></i>
                            <i class="icon-arrow-down" data-ng-switch-when="down"></i>
                        </span>

                    <span class="span2 text-medium" data-translate>IP</span>

                        <span class="span1 text-medium pull-right sortable"
                              data-ng-click="sortBy('state')"
                              data-ng-switch on="sortIcon.state" data-translate>
							State
                            <i class="icon-arrow-up" data-ng-switch-when="up"></i>
                            <i class="icon-arrow-down" data-ng-switch-when="down"></i>
                        </span>
                </div>

                <div>
                    <div data-ng-repeat="machine in pagedMachines[currentPage] | orderBy:sortingOrder:reverse"
                         class="item">

	                        <span data-ng-click="toggleMachine(machine.id)">
	                            <span data-ng-class="{'icon-chevron-down': isCollapsed(machine.id), 'icon-chevron-up': !isCollapsed(machine.id)}"
                                      class="summary  pull-left">&nbsp;</span>

	                            <span class="span2 text-medium crop">
	                                <a href="#!/machine/details/{{machine.id}}">{{machine.label}}</a>
	                            </span>

	                            <span class="span1 text-medium">{{machine.datacenter}}</span>
	                            <span class="span1 text-medium crop" alt="{{machine.created | fromNow}}" title="{{machine.created | fromNow}}">{{machine.created | fromNow}}</span>
								
								<span class="span2 text-medium crop">
	                                <span data-ng-repeat="ip in machine.ips">{{ip}}</span>
	                            </span>
	                            
								
	                            <span class="span1 pull-right state">
                                    <machine-status machine="machine"></machine-status>
	                            </span>
	                        </span>

                        <div class="toolbox-help"
                             data-ng-hide="machine.state != 'stopped'">
                            <span class="text-error" data-translate>Machine is stopped, but billing will continue. You have to delete machine to cancel billing</span>
                        </div>

                        <div data-ng-hide="isCollapsed(machine.id)" class="toolbox">
                            <div class="pull-left toolbox-list" style="padding-left:38px">
                                <span class="key span2 data-translate">Memory</span>
                                <span class="value span4">{{machine.memory | sizeFormat}}&nbsp;</span>
                                <div class="clearfix"></div>

                                <span class="key span2 data-translate">Disk</span>
                                <span class="value span4">{{machine.disk | sizeFormat}}&nbsp;</span>
                                <div class="clearfix"></div>

                                <span class="key span2 data-translate">Image</span>
                                <span class="value span4">{{machine.dataset.name}}</span>
                                <div class="clearfix"></div>

                                <span class="key span2" data-translate>IP(s)</span>
                                <span class="value span4">
                                    <span data-ng-repeat="ip in machine.ips">
                                        <!-- TODO: !isPrivateIP -->
                                        <span data-ng-show="isPrivateIP(ip)">{{ip}}</span>
                                    </span>
                                </span>
                                <div class="clearfix"></div>
                            </div>
                            <div class="pull-right action-container">
                                <button role="button"
                                        class="btn btn-mini"
                                        data-ng-disabled="machine.state == 'running' || (machine.job && !machine.job.finished)"
                                        data-ng-click="startMachine(machine.id)"
                                        data-toggle="modal"
                                        data-translate>Start</button>
                                <button role="button"
                                        class="btn btn-mini"
                                        data-ng-disabled="machine.state == 'stopped' || (machine.job && !machine.job.finished)"
                                        data-ng-click="stopMachine(machine.id)"
                                        data-translate>Stop</button>
                                <button role="button"
                                        class="btn btn-mini"
                                        data-ng-disabled="machine.state != 'stopped' || (machine.job && !machine.job.finished)"
                                        data-ng-click="deleteMachine(machine.id)"
                                        data-toggle="modal"
                                        data-translate>Delete</button>
                                <button role="button"
                                        class="btn btn-mini"
                                        data-ng-disabled="machine.state != 'running' || (machine.job && !machine.job.finished)"
                                        data-ng-click="rebootMachine(machine.id)"
                                        data-toggle="modal"
                                        data-translate>Reboot</button>
                                <!-- <a href="#!/machine/details/{{machine.id}}"><button
                                   class="btn btn-mini btn-primary"
                                   data-translate>Edit</button>
                                </a> -->
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>

                </div>

                <div class="pagination pagination-small pagination-centered span8">
                    <ul>
                        <li data-ng-class="{disabled: currentPage == 0}">
                            <a href ng-click="prevPage()" data-translate>« Prev</a>
                        </li>
                        <li data-ng-repeat="n in range()"
                            data-ng-class="{active: n == currentPage}"
                            data-ng-click="setPage()">
                            <a href ng-bind="n + 1">1</a>
                        </li>
                        <li data-ng-class="{disabled: currentPage == pagedMachines.length - 1}">
                            <a href ng-click="nextPage()" data-translate>Next »</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="pull-right span4">
                <button data-ng-click="changeLocation('/machine/add/')"
                        class="btn btn-success btn-large"

                        data-translate>Add new Machine</button>
                <div class="clearfix"></div>
                <br />
                <div class="alert alert-success shadow">
                    <h4 data-translate>Need help?</h4>
                    <p class="text-medium" data-translate>Help will open in new window</p>
                    <form class="form-search" method="GET" action="http://joyent.com/developers/search" target="_blank">
                        <div class="input-append">
                            <input type="text" name="q" class="input-medium search-query" placeholder="Search help" data-translate="placeholder">
                            <button type="submit" class="btn" data-translate>Search</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="machines container" data-ng-hide="(pagedMachines.length || initializing)">
            NO MACHINES VIEW
        </div>
        <div class="clearfix"></div>
    </div>
</div>

