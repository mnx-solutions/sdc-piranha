<div data-ng-controller="Machine.IndexController">
    <div class="loading-large" data-ng-show="loading"></div>
        <div class="machines container" data-ng-show="pagedMachines.length || query">
            <data-breadcrumb></data-breadcrumb>
            <data-notification></data-notification>

            <div class="page-header">
                <h1 class="pull-left" data-translate>Instances</h1>
                <div ng-show="!machines.final && !packages.final" class="loading-medium-after-h1"></div>

                <form class="form-search pull-right">
                    <input type="search"
                           class="span3"
                           name="search"
                           id="search"
                           placeholder="Search instances"
                           data-ng-model="query"
                           data-ng-change="search()"
                           data-translate="placeholder" />
                </form>

                <div class="clearfix"></div>
            </div>

            <div class="row">
				<div class="span9">
	                <div data-ng-switch="listType">
	                    <div data-ng-switch-when="normal" data-ng-include="'machine/static/partials/list-normal.html'"></div>
	                    <div data-ng-switch-when="alternate" data-ng-include="'machine/static/partials/list-alternate.html'"></div>
	                </div>

	                <div class="pagination pagination-small pagination-centered">
	                    <ul>
	                        <li data-ng-class="{disabled: currentPage == 0}">
	                            <a href ng-click="prevPage()" data-translate>« Prev</a>
	                        </li>
	                        <li data-ng-repeat="n in range()"
	                            data-ng-class="{active: n == currentPage}"
	                            data-ng-click="setPage()">
	                            <a href data-ng-bind="n + 1">1</a>
	                            <span data-ng-click="$event.stopPropagation()" class="" data-ng-show="(range()[$index] < range()[$index+1]-1)">...</span>
	                        </li>
	                        <li data-ng-class="{disabled: currentPage == pagedMachines.length - 1}">
	                            <a href data-ng-click="nextPage()" data-translate>Next »</a>
	                        </li>
                            <li data-ng-show="!showAllActive">
                                <a href data-ng-click="showAll()" data-translate>Show all</a>
                            </li>
                            <li data-ng-show="showAllActive">
                                <a href data-ng-click="showPages()" data-translate>Show pages</a>
                            </li>
	                    </ul>
                        <button role="button"
                                class="btn btn-mini button tooltip-hover"
                                data-ng-click="exportDetails()"
                                data-translate
                                data-translate-attributes="data-original-title"
                                data-toggle="tooltip"
                                data-placement="right"
                                data-html="true"
                                data-original-title="Export machine list in .csv">Export .csv</button>
                        <div style="display:none;" data-ng-bind-html-unsafe="exportIframe"></div>
	                </div>
				</div>
				
	            <div class="pull-right span3">
	                <button data-ng-click="changeLocation('/instance/create/')"
	                        class="create-instance btn btn-joyent-blue btn-large"
	                        data-translate>Create Instance</button>
		                <div class="alert alert-joyent-blue">
		                    <h4 data-translate>Need help?</h4>
		                    <p class="text-medium" data-translate>Help will open in new window</p>
		                    <form class="form-search" method="GET" action="http://joyent.com/developers/search" target="_blank">
		                        <div class="input-append">
		                            <input type="text" name="q" class="input-small search-query" placeholder="Search help" data-translate="placeholder">
		                            <button type="submit" class="btn" data-translate>Search</button>
		                        </div>
		                    </form>
		                </div>
	            </div>
            </div>
        </div>

        <div class="machines container" data-ng-hide="(pagedMachines.length || loading || query)">
            <data-notification></data-notification>

            <div class="alert alert-joyent-blue alert-global">
                <div class="pull-left">
                    <h4>Hello there!</h4>
                    <div data-translate>I see you have no instances configured.</div>
                </div>
                <a class="btn btn-joyent-blue pull-right alert-global" href="#!/instance/create" data-translate>Create an instance</a>
                <div class="clearfix"></div>
            </div>
        </div>
</div>

