<div class="container-fluid content-container" data-ng-controller="Machine.DetailsController">
<div class="container content-container-inner">
<div class="container form-horisontal">
<data-breadcrumb></data-breadcrumb>
<data-notification></data-notification>

<div class="page-header">
    <h1 class="pull-left">{{machine.name}}</h1>
    <machine-status machine="machine" class="pull-right" style="margin-top:20px"></machine-status>
	<div class="clearfix"></div>
</div>

<div class="machine container span8 listing text-medium">
    <fieldset data-ng-show="machine">
        <legend data-translate>Overview</legend>
        <div class="container span7">
            <span class="key span2" data-translate>UUID</span>
            <span class="value span5 pull-right">{{machine.id}}&nbsp;</span>
        </div>

        <div data-ng-show="machine.name" class="container span7">
            <span class="key span2" data-translate>Instance name</span>
            <span class="value span5 pull-right">{{machine.name}}&nbsp;</span>
        </div>

        <div class="container span7">
            <span class="key span2" data-translate>Type</span>
            <span class="value span5 pull-right">{{machine.type}}&nbsp;</span>
        </div>

        <div class="container span7">
            <span class="key span2" data-translate>Image</span>
            <span class="value span5 pull-right">{{dataset.name}}&nbsp;</span>
        </div>

        <div class="container span7">
            <span class="key span2" data-translate>Image Version</span>
            <span class="value span5 pull-right">{{dataset.version}}&nbsp;</span>
        </div>

        <div class="container span7">
            <span class="key span2" data-translate>Memory</span>
            <span class="value span5 pull-right">{{machine.memory | sizeFormat}}&nbsp;</span>
        </div>

        <div class="container span7">
            <span class="key span2" data-translate>Disk</span>
            <span class="value span5 pull-right">{{machine.disk | sizeFormat}}&nbsp;</span>
        </div>

        <div class="container span7" data-ng-show="machine.ips">
            <span class="key span2" data-translate>IP addresses</span>
                            <span class="value span5 pull-right">
                                <span data-ng-repeat="ip in machine.ips">{{ip}}&nbsp;</span>
                            </span>
        </div>

        <div class="container span7" data-ng-show="machine.created">
            <span class="key span2" data-translate>Created</span>
                            <span class="value span5 pull-right">
                                {{machine.created | date:'yyyy-MM-dd HH:mm:ss Z'}}&nbsp;
                            </span>
        </div>

        <div class="container span7" data-ng-show="machine.datacenter">
            <span class="key span2" data-translate>Datacenter</span>
            <span class="value span5 pull-right">{{machine.datacenter}}&nbsp;</span>
        </div>

        <div class="container span7" data-ng-show="machine.primaryIps.length">
            <span class="key span2" data-translate>Login</span>
            <span class="value span5 pull-right">ssh root@{{machine.primaryIps[0]}}&nbsp;</span>
        </div>
    </fieldset>

    <fieldset data-ng-show="machine.metadata.credentials">
        <legend data-translate>Credentials</legend>

        <table class="table table-striped text-medium">
            <thead>
                <th data-translate>System</th>
                <th data-translate>Username</th>
                <th data-translate>Password</th>
                <th>&nbsp;</th>
            </thead>
            <tr data-ng-repeat="(key,credential) in machine.metadata.credentials">
                <td>{{credential.system}}</td>
                <td>{{credential.username}}</td>
                <td>
                    <span data-ng-show="isPasswordVisible(key)">************</span>
                    <span data-ng-hide="isPasswordVisible(key)">{{credential.password}}</span>
                </td>
                <td nowrap>
                    <a class="show-password" data-translate data-ng-click="togglePassword(key)" data-ng-show="isPasswordVisible(key)">[ Show ]</a>
                    <a class="show-password" data-translate data-ng-click="togglePassword(key)" data-ng-show="!isPasswordVisible(key)">[ Hide ]</a>
                </td>
            </tr>
        </table>
    </fieldset>

    <fieldset>
        <legend>
            <span data-translate>Tags</span>
            <small data-translate>Add tags for convenient instance searching</small>
        </legend>

        <p class="text-small muted" data-translate>
            Tags are metadata stored as key-value pairs to make it easier for you to find, sort,
            and identify your instances.
        </p>

        <div class="clearfix"></div>

        <div data-ng-class="{'loading-medium behind': (!tagcloud || tagsave)}">
            <div class="tags container span7" data-ng-click="editTag(key)" data-ng-repeat="(key, o) in tagcloud">
                <div class="tag" data-ng-show="!o.edit">
                    <span class="key span3" data-ng-class="{error: o.conflict}">{{o.key}}</span>
                    <span class="value span4" data-ng-class="{error: o.conflict}">
                        {{o.val}}
                        <span class="icon-trash pull-right delete"
                              data-ng-click="removeTag(key)"
                              data-ng-show="!tagsave"
                              ></span>
                        <div class="clearfix"></div>
                    </span>
                </div>

                <div class="tag editable muted" data-ng-show="o.edit">
                    <div data-ng-class="{error: o.conflict}" class="controls control-group" >
                        <input class="input-large"
                               type="text"
                               placeholder="Key"
                               data-translate="placeholder"
                               data-ng-model="o.key">

                        <input type="text"
                               class="input-large span3"
                               placeholder="Value"
                               data-translate="placeholder"
                               data-ng-model="o.val"
                               style="margin-left:10px">

						<span class="icon-trash pull-right delete"
                              data-ng-click="removeTag(key)"
                              data-ng-show="!tagsave && tagsavekey != tagnr">
                        </span>

						<button class="btn btn-success pull-right"
                                data-ng-click="clickSaveTags(machine.id)"
                                data-translate
                                data-ng-show="key == tagnr"
                                data-ng-disabled="machine.state != 'running'">Save</button>
                        <div class="clearfix"></div>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
    </fieldset>

    <fieldset>
        <legend data-translate>Resize machine</legend>
        <p class="text-small muted" data-translate>
            It may not always be possible to resize based on the constraints of your current server location.
        </p>

        <p data-ng-show="datasetType != 'smartos'" data-translate>
            To resize Linux or Windows instances, you will need to create a instance, migrate and then stop the old instance.
        </p>
		
		<div data-ng-show="datasetType == 'smartos'" class="well well-small" data-ng-class="{'loading-medium': isResizing}">
	        <div class="span2 container arrow-to" data-ng-show="currentPackage">
				<div>
					<h6 data-translate>Current package</h6>
                    <span>{{currentPackage.description}}</span><br />
                    <span data-translate>Type</span>:
                    <span>{{currentPackage.group}}</span><br />
                    <span data-translate>Memory</span>:
		            <span data-translate>{{currentPackage.memory | sizeFormat}}</span><br />
		            <span data-translate>Disk</span>:
		            <span data-translate>{{currentPackage.disk | sizeFormat}}</span><br />
		            <span data-translate>vCPUs</span>:
		            <span data-translate>{{currentPackage.vcpus}}</span>
				</div>
	        </div>

			<div style="width:250px" data-ng-class="{'pull-right': currentPackage}">
				<h6 class="control-label" data-translate>Resize Package</h6>
	            <select name="resize" ui-select2 data-ng-model="selectedPackageName" style="width:250px">
	                <option data-ng-repeat="package in packages | orderBy:sortPackages | filter:filterPackages"
	                        value="{{package.name}}" class="text-medium">
	                    Mem: {{package.memory | sizeFormat}}
	                    Disk: {{package.disk | sizeFormat}}
	                    VCPU: {{package.vcpus}}
	                </option>
	            </select>

	            <div class="clearfix"></div>
	            <br />
		        <div class="control-group align-right">
		            <button class="btn btn-success" type="submit" data-ng-click="clickResize()" data-ng-disabled="isResizing" data-translate>Resize</button>
		        </div>
			</div>
			<div class="clearfix"></div>
		</div>
		
    </fieldset>

    <div class="clearfix"></div>
</div>

<div class="span4 pull-right" style="margin-top:40px">
    <div class="well well-small shadow">
	<div class="row-fluid">
        <button role="button"
                data-ng-disabled="(machine.job && !machine.job.finished) || machine.state != 'stopped'"
                data-ng-click="clickStart(machine.id)"
                data-toggle="modal"
                data-translate
                data-ng-class="{'btn-success': !((machine.job && !machine.job.finished) || machine.state != 'stopped')}"
                class="btn btn-small span3">Start</button>
        <button role="button"
                data-ng-disabled="(machine.job && !machine.job.finished) || machine.state != 'running'"
                data-ng-click="clickStop(machine.id)"
                data-toggle="modal"
                data-translate
                data-ng-class="{'btn-danger': !((machine.job && !machine.job.finished) || machine.state != 'running')}"
                class="btn btn-small span3">Stop</button>
        <button role="button"
                data-ng-disabled="(machine.job && !machine.job.finished) || machine.state != 'stopped'"
                data-ng-click="clickDelete(machine.id)"
                data-translate
                data-toggle="modal"
                data-ng-class="{'btn-danger': !((machine.job && !machine.job.finished) || machine.state != 'stopped')}"
                class="btn btn-small span3">Delete</button>

        <button role="button"
                data-ng-disabled="(machine.job && !machine.job.finished) || machine.state != 'running'"
                data-ng-click="clickReboot(machine.id)"
                data-toggle="modal"
                data-translate
                data-ng-class="{'btn-warning': !((machine.job && !machine.job.finished) || machine.state != 'running')}"
                class="btn btn-small span3">Reboot</button>
    	</div>
	</div>
    <div class="clearfix"></div>
    <div class="alert alert-success shadow">
        <h4 data-translate>Need help?</h4>
        <p data-translate>Help will open in new window</p>
        <form class="form-search" method="GET" action="http://joyent.com/developers/search" target="_blank">
            <div class="input-append">
                <input type="text" name="q" class="span2 search-query" placeholder="Search">
                <button type="submit" class="btn" data-translate>Search</button>
            </div>
        </form>
    </div>
    <div class="alert shadow">
        <h4 data-translate>Analytics</h4>
        <p data-translate>Check out this machines analytics.</p>
        <a href="#!/cloudAnalytics/{{machine.id}}"><img src="/static/img/analytics.png" hspace="10" vspace="20" border="0"></a>
    </div>
    <div class="clearfix"></div>
</div>
<div class="clearfix"></div>
</div>
</div>
<div class="clearfix"></div>
</div>