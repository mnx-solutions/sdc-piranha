<div class="{{isSignUpForm}}">
<!--<div class="{{isSignUpForm && 'row-fluid' || 'container span9'}}">-->
<div class="account">

<form name="paymentForm" novalidate="" class="paymentForm">
    <fieldset class="line">
        <legend>
            <a data-ng-click="skipBillingFn()"
               data-ng-show="isSignUpForm && skipBillingVisible"
               class="btn legend-button pull-right" data-translate>Skip</a>
            Credit Card Details
        </legend>
        <div class="form-group">
            <span class="edit-name orange-asterix">Card Number</span>
                    <span class="edit-value">
                        <input type="text"
                               id="creditCardNumber"
                               name="creditCardNumber"
                               size="40"
                               data-ng-model="form.creditCardNumber"
                               data-ng-maxlength="19"
                               data-ng-change="validateCCNumber()"
                               data-ng-class="{error: isError('creditCard.creditCardNumber')}"
                               data-ng-required="true"
                               data-auto-focus>
                    </span>
                    <span class="edit-error">
                        <div class="error"
                             data-translate
                             data-ng-show="isError('creditCard.creditCardNumber', 'maxlength')">
                             Credit card number is too long
                        </div>
                        <div class="error"
                             data-translate
                            data-ng-show="invalidCCNumber">
                            Please provide valid 16-digit card number
                        </div>
                        <div class="error"
                             data-translate
                             data-ng-show="missingCCNumber">
                            Missing credit card number
                        </div>
                    </span>
                        </div>
        <div class="form-group">
            <span class="edit-name orange-asterix">Expiration</span>
                    <span class="edit-value-two">
                        <select data-select-two
                                data-select="form.expirationMonth"
                                id="expirationMonth"
                                name="expirationMonth"
                                class="edit-expiration-month"
                                data-expiration-date
                                data-search-box="true"
                                data-ng-class="{error: isError('creditCard.expirationMonth', 'invalidExpirationDate') || isError('creditCard.expirationMonth')}"
                                data-ng-required="true"
                                data-ng-model="form.expirationMonth">
                            <option data-ng-repeat="value in months" value="{{value}}" ng-selected="form.expirationMonth == value">{{value}}</option>
                        </select>
                        <span class="selects-spacer"></span>

                        <select data-select-two
                                data-select="form.expirationYear"
                                id="expirationYear"
                                name="expirationYear"
                                class="edit-expiration-year"
                                data-ng-style="selectStyle"
                                data-expiration-date
                                data-search-box="true"
                                data-ng-class="{error: isError('creditCard.expirationYear', 'invalidExpirationDate') || isError('creditCard.expirationYear')}"
                                data-ng-required="true"
                                data-ng-model="form.expirationYear">
                            <option data-ng-repeat="value in years" value="{{value}}" ng-selected="form.expirationYear == value">{{value}}</option>
                        </select>
                    </span>
                    <span class="edit-error">
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('creditCard.expirationYear', 'invalidExpirationDate') || isError('creditCard.expirationMonth', 'invalidExpirationDate')">
                            Please provide the date in the future
                            </div>
                            <div class="error"
                                 data-translate
                                 data-ng-show="isError('creditCard.expirationYear') || isError('creditCard.expirationMonth')">
                                Invalid credit card expiration date
                            </div>
                            <div class="error"
                                 data-translate
                                 data-ng-show="isError('expirationYear', 'submitRequired') || isError('expirationMonth', 'submitRequired')">
                                Missing expiration info
                            </div>
                    </span>
                        </div>
        <div class="form-group">
            <span class="edit-name orange-asterix">CCV Ð¡ode</span>
                    <span class="edit-value">
                            <input type="text"
                                   id="securityCode"
                                   name="securityCode"
                                   maxlength="4"
                                   data-ng-minlength="3"
                                   data-ng-class="{error: isError('creditCard.securityCode')}"
                                   data-ng-model="form.securityCode"
                                   data-ng-required="true" />
                    </span>
                    <span class="edit-error">
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('creditCard.securityCode', 'minlength')">
                            Please provide valid 3 or 4-digit security code
                            </div>
                            <div class="error"
                                 data-translate
                                 data-ng-show="isError('creditCard.securityCode', 'required') || isError('securityCode', 'submitRequired')">
                                Missing security code
                            </div>
                    </span>
                        </div>
        <div class="form-group">
            <span class="edit-name orange-asterix">First Name</span>
                    <span class="edit-value">
                        <input type="text"
                               id="firstName"
                               name="firstName"
                               size="50"
                               data-ng-class="{error: isError('billToContact.firstName')}"
                               data-ng-model="form.firstName"
                               data-ng-maxlength="25"
                               data-ng-required="true">
                    </span>
                    <span class="edit-error">
                        <div class="error"
                             data-translate
                             data-ng-show="isError('billToContact.firstName', 'maxlength')">
                            First name is too long
                        </div>
                        <div class="error"
                             data-translate
                             data-ng-show="isError('billToContact.firstName')">
                            Invalid first name
                        </div>
                        <div class="error"
                             data-translate
                             data-ng-show="isError('billToContact.firstName', 'required') || isError('firstName', 'submitRequired')">
                            Missing first name
                        </div>
                    </span>
        </div>
        <div class="form-group">
            <span class="edit-name orange-asterix">Last Name</span>
                    <span class="edit-value">
                            <input type="text"
                                   id="lastName"
                                   name="lastName"
                                   size="50"
                                   data-ng-class="{error: isError('billToContact.lastName')}"
                                   data-ng-model="form.lastName"
                                   data-ng-maxlength="25"
                                   data-ng-required="true" />
                    </span>
                    <span class="edit-error">
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('billToContact.lastName', 'maxlength')">
                                Last name is too long
                            </div>
                            <div class="error"
                                 data-translate
                                 data-ng-show="isError('billToContact.lastName')">
                                Invalid last name
                            </div>
                            <div class="error"
                                 data-translate
                                 data-ng-show="isError('billToContact.lastName', 'required') || isError('lastName', 'submitRequired')">
                                Missing last name
                            </div>
                    </span>
                        </div>
    </fieldset>
    <fieldset class="line">
        <legend>Billing Address</legend>
        <div class="form-group">
            <span class="edit-name orange-asterix">Address Line 1</span>
                    <span class="edit-value">
                            <input type="text"
                                   id="addressLine1"
                                   name="addressLine1"
                                   data-ng-class="{error: isError('addressLine1')}"
                                   data-ng-model="form.cardHolderInfo.addressLine1"
                                   size="255"
                               data-ng-required="true"/>
                    </span>
                    <span class="edit-error">
                        <div class="error"
                             data-translate
                             data-ng-show="isError('addressLine1')">
                            Invalid address 1 line
                        </div>
                        <div class="error"
                             data-translate
                             data-ng-show="isError('addressLine1', 'required') || isError('addressLine1', 'submitRequired')">
                            Missing address 1 line
                        </div>
                    </span>
                        </div>
        <div class="form-group">
            <span class="edit-name">Address Line 2</span>
                    <span class="edit-value">
                            <input type="text"
                                   id="addressLine2"
                                   name="addressLine2"
                                   data-ng-class="{error: isError('addressLine2')}"
                                   data-ng-model="form.cardHolderInfo.addressLine2"
                               size="255">
                    </span>
                    <span class="edit-error">
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('addressLine2')">
                                Invalid address 2 line
                            </div>
                            <div class="error"
                                 data-translate
                                 data-ng-show="isError('addressLine2', 'required')">
                                Missing address 2 line
                            </div>
                    </span>
                        </div>
        <div class="form-group">
            <span class="edit-name orange-asterix">Country</span>
                    <span class="edit-value-one">
                        <select data-select-two
                                id="country"
                                name="country"
                                data-ng-class="{error: isError('country')}"
                                class="edit-country"
                                data-ng-model="form.cardHolderInfo.country"
                                data-ng-change="form.cardHolderInfo.country"
                                data-select="selectedCountry"
                                data-ng-options="country.iso3 as country.name group by country.group for country in countries.data | orderBy: ['-group','name']"
                                data-ng-required="true"
                                data-search-box="true">
                        </select>
                    </span>
                    <span class="edit-error">
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('country') || (formSubmitted && paymentForm.country.$invalid && !paymentForm.country.$error.required)">
                                Invalid country
                            </div>
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('country', 'required') || isError('country', 'submitRequired')">
                                Missing country
                            </div>
                    </span>
                        </div>
        <div class="form-group">
            <span class="edit-name orange-asterix">City</span>
                    <span class="edit-value">
                            <input type="text"
                                   id="city"
                                   name="city"
                                   size="40"
                                   data-ng-class="{error: isError('city')}"
                                   data-ng-model="form.cardHolderInfo.city"
                                   data-ng-required="true"
                               data-ng-maxlength="40">
                    </span>
                    <span class="edit-error">
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('city', 'maxlength')">
                                City is too long
                            </div>
                            <div class="error"
                                 data-translate
                                 data-ng-show="isError('city') || (formSubmitted && paymentForm.city.$invalid && !paymentForm.city.$error.required)">
                                Invalid city
                            </div>
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('city', 'required') || isError('city', 'submitRequired')">
                                Missing city
                            </div>
                    </span>
                        </div>
        <div class="form-group">
            <span class="edit-name orange-asterix" data-ng-class="{'orange-asterix': !!stateSel}">State</span>
            <span data-ng-switch="!!stateSel">
                <span data-ng-switch-default>
                            <span class="edit-value">
                                <input type="text"
                                       id="state"
                                       name="state"
                                       data-ng-class="{error: isError('state')}"
                                       data-ng-model="form.cardHolderInfo.state">
                            </span>
                             <span class="edit-error">
                                <div class="error"
                                     data-translate
                                     data-ng-show="isError('state')">
                                    Invalid state
                                </div>
                                <div class="error"
                                     data-translate
                                     data-ng-show="isError('state', 'required')">
                                    Missing state
                                </div>
                            </span>
                </span>
                <span data-ng-switch-when="true">
                            <span class="edit-value-one">
                                <select ui-select2="{setPristine: true, minimumResultsForSearch: 1}"
                                        data-ng-model="form.cardHolderInfo.state"
                                        id="stateSel"
                                        class="edit-state"
                                        name="state"
                                        data-ng-class="{error: isError('state')}"
                                        data-ng-required="true"
                                        placeholder=" ">
                                    <option value=""></option>
                                    <option data-ng-repeat="(value, label) in stateSel" value="{{value}}" ng-selected="form.cardHolderInfo.state == value">{{label}}</option>
                                </select>
                            </span>
                            <span class="edit-error">
                                <div class="error"
                                     data-translate
                                     data-ng-show="isError('state') || (formSubmitted && paymentForm.state.$invalid && !paymentForm.state.$error.required)">
                                    Invalid state
                                </div>
                                <div class="error"
                                     data-translate
                                     data-ng-show="isError('state', 'submitRequired')">
                                    Missing state
                                </div>
                            </span>
                </span>
            </span>
                            </div>
        <div class="form-group">
            <span class="edit-name orange-asterix">Zip Code</span>
                    <span class="edit-value">
                            <input type="text"
                                   id="zipCode"
                                   name="zipCode"
                                   data-ng-class="{error: isError('zipCode')}"
                                   data-ng-model="form.cardHolderInfo.zipCode"
                                   data-ng-required="true"
                               data-ng-maxlength="20">
                    </span>
                    <span class="edit-error">
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('zipCode', 'maxlength')">
                                Zip code is too long
                            </div>
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('zipCode') || (formSubmitted && paymentForm.zipCode.$invalid && !paymentForm.zipCode.$error.required)">
                                Invalid zip code
                            </div>
                        <div class="error"
                                 data-translate
                                 data-ng-show="isError('zipCode', 'required') || isError('zipCode', 'submitRequired')">
                                Missing zip code
                            </div>
                    </span>
                        </div>
        <div class="form-group" data-ng-show="phoneVisible">
            <span class="edit-name orange-asterix">Phone</span>
            <span data-phone-number
                                 data-number="phone.number"

                                 data-country="{{phone.country}}"
                                 data-is-error="isError(field, type)"
                data-required="phoneVisible"
                data-el-width="215"></span>
        </div>
    </fieldset>
    <fieldset class="line" data-ng-show="isPromoVisible()">
        <legend data-translate>Promotional Code</legend>
        <div class="form-group">
            <span class="edit-name" data-translate>Enter Code
            <span data-html="true"
                  data-translate-attributes="data-original-title"
                  data-toggle="tooltip"
                  data-trigger="hover"
                  data-placement="right"
                  class="tooltip-hover glyphicon glyphicon-info-sign"
                  data-original-title="Promotional Code for a discount"></span>
                    </span>
            <span class="edit-value">
                            <input type="text"
                                   id="promoCode"
                                   name="promoCode"
                                   data-ng-class="{error: isError('promoCode')}"
                                   data-ng-model="form.promoCode"
                                   size="255"
                                   data-ng-required="false"/>
        </span>
        <span class="edit-error">
                            <div class="error"
                                 data-translate="value"
                                 data-ng-show="isError('promoCode')">
                                {{errs.promoCode}}
                            </div>
        </span>
                        </div>

    </fieldset>

    <div data-ng-show="isSignUpForm" class="signup-btn-group">
        <div class="pull-right">
            <a data-ng-show="isSignUpForm" data-ng-click="signOut()" class="btn" data-translate>Cancel Signup Process</a>
            <a data-ng-show="isSignUpForm && skipBillingVisible" data-ng-click="skipBilling()" class="btn" data-translate>Skip</a>
            <button class="btn orange" data-ng-click="submitForm()" data-ng-disabled="loading">Complete Account Setup</button>
        </div>
        <div class="loading-medium pull-right" style="width:30px; height:30px;min-width:30px;min-height:30px;" data-ng-show="loading"></div>
        <div style="margin-top: 5px;" data-ng-hide="loading">
            <span class="orange-asterix-left">required fields</span>
        </div>
        <div class="fieldset-spacer"></div>
        <br>
    </div>
    <div data-ng-hide="isSignUpForm" class="signup-btn-group">
        <div data-ng-hide="loading" class="required-txt">
            <span class="orange-asterix-left">&nbsp;required fields</span>
        </div>
        <div class="pull-right">
            <button class="btn" data-ng-hide="!cancelVisible" data-ng-disabled="loading || accountForm.$invalid" data-ng-click="cancelForm()" data-ng-disabled="loading">Cancel</button>
            <button class="btn orange" data-ng-click="submitForm()" data-ng-disabled="loading">{{submitBtnTitle}}</button>
        </div>
        <div class="pull-right loading-medium" data-ng-show="loading"></div>
        <div class="fieldset-spacer"></div>
        <br>
        </div>
    </form>
</div></div>

